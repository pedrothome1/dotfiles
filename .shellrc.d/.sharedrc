#!/usr/bin/env bash

export OS_NAME="$(uname -s)"

if [[ "$OS_NAME" == "Darwin" && true ]]; then
  export DARWIN_USING_GNU='true'
  
  if [[ -z "$HOMEBREW_PREFIX" ]]; then
    HOMEBREW_PREFIX="$(brew --prefix)"
  fi

  export PATH="$HOMEBREW_PREFIX/opt/coreutils/libexec/gnubin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/findutils/libexec/gnubin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/gnu-tar/libexec/gnubin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/gnu-sed/libexec/gnubin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/gawk/libexec/gnubin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/gnu-indent/libexec/gnubin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/gnu-getopt/bin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/grep/libexec/gnubin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/less/bin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/make/libexec/gnubin:$PATH"
  export PATH="$HOMEBREW_PREFIX/opt/m4/bin:$PATH"

  export MANPATH="$HOMEBREW_PREFIX/opt/coreutils/libexec/gnuman:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/findutils/libexec/gnuman:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/gnu-tar/libexec/gnuman:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/gnu-sed/libexec/gnuman:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/gawk/libexec/gnuman:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/gnu-indent/libexec/gnuman:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/gnu-getopt/share/man:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/grep/libexec/gnuman:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/less/share/man:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/make/libexec/gnuman:$MANPATH"
  export MANPATH="$HOMEBREW_PREFIX/opt/m4/share/man:$MANPATH"
  
  man() {
    if [[ ! "$1" =~ ^[A-Za-z0-9_]+$ ]]; then
      command man "$@"
      return $?
    fi

    zcat -f "$(command man -w "$@")" | mandoc -Tascii -Owidth=80 | less
  }
fi

export PATH=$PATH:$HOME/.local/bin
export PATH=$PATH:$HOME/go/bin
export PATH=$HOME/bin:$PATH

export MANCOLOR=1

export FZF_DEFAULT_COMMAND="fd --type f --strip-cwd-prefix --hidden"

. ~/.shellrc.d/.aliases_and_functions
[ -f ~/.shellrc.d/.companyrc ] && . ~/.shellrc.d/.companyrc

